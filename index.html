<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Ping Pong</title>
    <meta name="description" content="Games made only with vanilla HTML JS and CSS">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>body { margin: 0; padding: 0;}</style>
    <script>
    var paddleAIY = paddlePlayerY = 40;
    var paddleWidth = 10, paddleHeight = 100;
    var ballX = 320;
    var ballY = 240;
    var ballSize = 5;
    var velocityX = velocityY = 5;
    var scoreAI = scorePlayer = 0;
    var speedAI = 3;

      window.onload = function () {
        canvas = document.getElementById("canvas");
        canvasContext = canvas.getContext("2d");

        setInterval(update, 1000/30);

        canvas.addEventListener("mousemove", function (a) {
            paddlePlayerY = a.clientY - paddleHeight / 2;
        });
      }

      function update () {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        if (paddleAIY + paddleHeight / 2 < ballY) {
          paddleAIY += speedAI;
        } else {
          paddleAIY -= speedAI;
        }

        canvasContext.fillStyle = "black";
        canvasContext.fillRect(0, 0, canvas.width, canvas.height);

        canvasContext.fillStyle = "white";
        canvasContext.fillRect(0, paddlePlayerY, paddleWidth, paddleHeight);
        canvasContext.fillRect(canvas.width - paddleWidth, paddleAIY, paddleWidth, paddleHeight);
        canvasContext.fillRect(ballX - ballSize / 2, ballY - ballSize / 2, ballSize, ballSize);
        canvasContext.fillText(scorePlayer, 100, 100);
        canvasContext.fillText(scoreAI, canvas.width - 100, 100);


        ballX += velocityX;
        ballY += velocityY;

        if (ballY < 0 && velocityY < 0) {
          velocityY = -velocityY;
        }
        if (ballY > canvas.height && velocityY > 0) {
          velocityY = -velocityY;
        }
        if (ballX < 0) {
          if (ballY > paddlePlayerY && ballY < paddlePlayerY + paddleHeight) {
            velocityX = -velocityX;
            deltaY = ballY - (paddlePlayerY + paddleHeight) / 2;
            velocityY = dy * 0.3;
          } else {
            scoreAI++;
            reset();
          }
        }
      if (ballX >= canvas.width) {
        if (ballY > paddleAIY && ballY < paddleAIY + paddleHeight) {
          velocityX = -velocityX;
          deltaY = ballY - (paddleAIY + paddleHeight) / 2;
          velocityY = dy * 0.3;
        } else {
          scorePlayer++;
          reset();
          }
        }
      }

      function reset () {
        ballX = canvas.width / 2;
        ballY = canvas.height / 2;
        velocityX = -velocityX;
        velocityY = 3;
      }
    </script>
  </head>
  <body>
    <canvas id="canvas" width="640" height="480"></canvas>
  </body>
</html>
